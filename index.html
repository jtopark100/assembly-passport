<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>조립1부 문화여권 – 데모(SPA)</title>
  <meta name="theme-color" content="#081C46"/>
  <style>
    :root{
      --navy:#081C46; --gold:#E5C255; --ink:#0d1a3a; --bg:#fbf9f4; --line:#d7d2c8;
      --text:#0e1320; --muted:#7b7f8a;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,'Noto Sans KR',sans-serif}


    /* 헤더/링크 레이아웃 안정화 */
    header.app{background:var(--navy);color:#fff;padding:16px 20px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:28px;height:28px;border-radius:8px;background:var(--navy);
      display:inline-grid;place-items:center;border:2px solid var(--gold)}
    .topnav{display:flex;gap:8px;margin-left:auto}
    .link{color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,.35);padding:6px 10px;border-radius:8px}


    .container{padding:16px 16px 96px}
    .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:16px;margin:12px 0;
      box-shadow:0 1px 0 rgba(0,0,0,.04)}
    .points{font-size:28px;font-weight:700;color:var(--navy)}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:14px 0}
    .grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    a.btn,button.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;
      padding:14px 12px;background:#fff;border:1px solid var(--line);border-radius:12px;
      color:var(--text);text-decoration:none}
    .btn.primary{background:var(--gold);border-color:#c7a64a;font-weight:700}
    .footer{position:sticky;bottom:0;padding:10px 16px;background:linear-gradient(180deg,rgba(251,249,244,0),rgba(251,249,244,1));color:var(--muted);font-size:12px}


    /* Passport grid */
    .month{background:#fff;border:1.5px solid var(--line);border-radius:16px;padding:12px;min-height:150px;
      display:flex;flex-direction:column;gap:8px;cursor:pointer;transition:box-shadow .15s ease}
    .month:hover{box-shadow:0 4px 18px rgba(0,0,0,.06)}
    .month h3{margin:0;font-size:14px;color:var(--ink)}
    .thumb{width:100%;aspect-ratio:4/3;border:1px dashed #cfc9bb;border-radius:10px;
      display:flex;align-items:center;justify-content:center;color:#9b9182;font-size:12px}
    .caption{font-size:12px;color:#3b3f52;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .stamp{width:44px;height:44px;border-radius:50%;border:2px solid var(--navy);
      display:flex;align-items:center;justify-content:center;color:var(--gold);
      font-weight:800;font-style:italic;align-self:flex-end}
    .stamp.special{border-color:var(--gold);color:var(--navy);box-shadow:0 0 0 2px rgba(229,194,85,.25) inset}


    [data-view]{display:none}
    [data-view].show{display:block}
    .topbar{display:flex;align-items:center;gap:10px;margin:0 0 12px}


    /* Modal */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.4);padding:18px}
    .modal.show{display:grid}
    .panel{width:min(720px,100%);background:#fff;border-radius:16px;border:1px solid var(--line);overflow:hidden}
    .panel header{padding:14px 16px;background:#f4f2ec;border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between}
    .panel main{padding:16px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{font-size:12px;border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:#fff}
    .gallery{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
    .ph{aspect-ratio:4/3;background:#faf7ef;border:1px dashed #cfc9bb;border-radius:10px;
      display:grid;place-items:center;color:#9b9182;font-size:12px}
    .memo{font-size:14px;line-height:1.45;color:#2a2f43;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .memo.expanded{-webkit-line-clamp:unset}
    .muted{color:#8a8f9c;font-size:12px}
    .hstack{display:flex;align-items:center;gap:8px}
    .right{margin-left:auto}
    .ghost{background:#fff;border:1px solid var(--line);border-radius:10px;padding:8px 10px;cursor:pointer}
    @media (min-width:900px){ .container{max-width:980px;margin:0 auto} }
  </style>
</head>
<body>


  <header class="app">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <h1 style="margin:0;font-size:18px;">조립1부 문화여권</h1>
    </div>


    <nav class="topnav">
      #/홈</a>
      #/passport여권 보기</a>
    </nav>
  </header>


  <main class="container">
    <!-- Home -->
    <section id="view-home" data-view class="show">
      <section class="card">
        <h2>이번 달 미션</h2>
        <p id="mission-title">대표 썸네일 업로드 테스트</p>
        <div class="points"><span id="mission-points">0</span>점</div>
      </section>


      <nav class="grid-2">
        #/passport여권 보기</a>
        <button class="btn" >사진 업로드</button>
        <button class="btn" >랭킹</button>
        <button class="btn" >관리자 승인</button>
      </nav>


      <section class="card">
        <h2>내 포인트</h2>
        <div class="points"><span id="my-points">0</span>점</div>
      </section>
    </section>


    <!-- Passport -->
    <section id="view-passport" data-view>
      <div class="topbar">
        #/&larr; 홈</a>
        <h2 style="margin:0;">여권</h2>
      </div>
      <div class="grid-3" id="months-grid"></div>
    </section>
  </main>


  <footer class="footer">© 2026 조립1부</footer>


  <!-- Detail Modal -->
  <div id="detail-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="detail-title">
    <div class="panel">
      <header>
        <strong id="detail-title">2월 상세</strong>
        <button class="ghost" >닫기</button>
      </header>
      <main>
        <div class="chips" id="detail-chips"></div>
        <section class="gallery" id="detail-gallery"></section>
        <section>
          <div id="detail-memo" class="memo">팀 스토리/에피소드가 들어갑니다. 기본 2줄만 노출되고, ‘더보기’를 누르면 전체가 펼쳐집니다.</div>
          <div class="hstack" style="margin-top:6px;">
            <button class="ghost" >더보기</button>
            <span class="muted right" id="detail-meta">참여 5점 · 팀장 +2점 · 자발적 +3점 · 5장 이상 +1점</span>
          </div>
        </section>
      </main>
    </div>
  </div>


  <script>
    // Router
    const views = {
      home: document.getElementById('view-home'),
      passport: document.getElementById('view-passport')
    };
    function show(view){
      Object.values(views).forEach(v=>v.classList.remove('show'));
      (views[view]||views.home).classList.add('show');
      if(view==='passport') renderPassport();
    }
    function onRoute(){
      const hash = location.hash.replace('#','');
      if(hash.startsWith('/passport')) show('passport'); else show('home');
    }
    window.addEventListener('hashchange', onRoute);
    window.addEventListener('load', onRoute);


    // Demo data
    const demoMedia = {
      2: [{cap:'첫 활동 테스트 캡션'}],
      10:[{cap:'특별 미션 성공!'}]
    };
    const demoStamp = { 2:'basic', 10:'special' };


    function renderPassport(){
      const grid = document.getElementById('months-grid');
      grid.innerHTML = '';
      const months=[2,3,4,5,6,7,8,9,10,11,12];
      months.forEach(m=>{
        const medias = demoMedia[m]||[];
        const latest = medias[medias.length-1];
        const stamp = demoStamp[m];


        const card = document.createElement('div');
        card.className = 'month';
        card.innerHTML = `
          <h3>${m}월</h3>
          <div class="thumb">${latest ? '대표 썸네일' : '+ 사진 추가'}</div>
          <div class="caption">${latest ? latest.cap : '설명 없음'}</div>
          ${stamp ? `<div class="stamp ${stamp==='special'?'special':''}">${stamp==='special'?'★':'Pass'}</div>` : ''}
        `;
        card.=>openDetail(m);
        grid.appendChild(card);
      });
    }


    // Detail Modal
    const modal = document.getElementById('detail-modal');
    const chips = document.getElementById('detail-chips');
    const gallery = document.getElementById('detail-gallery');
    const memo = document.getElementById('detail-memo');
    const title = document.getElementById('detail-title');
    const meta  = document.getElementById('detail-meta');


    function openDetail(month){
      title.textContent = month+'월 상세';
      chips.innerHTML = '';
      const stamp = demoStamp[month];
      const items = ['참여 완료'];
      if(stamp==='basic') items.push('기본 스탬프 Pass');
      if(stamp==='special') items.push('특별 스탬프');
      items.forEach(t=>{
        const c=document.createElement('span'); c.className='chip'; c.textContent=t; chips.appendChild(c);
      });


      gallery.innerHTML='';
      const medias = demoMedia[month]||[];
      const count = Math.max(2, Math.min(4, (medias.length||2)));
      for(let i=0;i<count;i++){
        const ph=document.createElement('div'); ph.className='ph'; ph.textContent = medias[i]?.cap || '샘플 썸네일';
        gallery.appendChild(ph);
      }


      memo.classList.remove('expanded');
      memo.textContent = (medias[0]?.cap || '팀 스토리/에피소드가 들어갑니다. 기본 2줄 노출, 더보기로 전체 펼침.');
      meta.textContent = '참여 5점 · 팀장 +2점 · 자발적 +3점 · 5장 이상 +1점';


      modal.classList.add('show');
    }
    function closeDetail(){ modal.classList.remove('show'); }
    function toggleMemo(){ memo.classList.toggle('expanded'); }


    if(location.hash.replace('#','').startsWith('/passport')) renderPassport();
  </script>
</body>
 

</html>